<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Vertical testss</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  touch-action: pan-y;
}

#viewer {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: black;
}

#track {
  display: flex;
  height: 100%;
}

.page {
  min-width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.page img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}
</style>
</head>

<body>

<div id="viewer">
  <div id="track">
    <!-- å·¦ã‹ã‚‰é †ã«ä¸¦ã¹ã‚‹ï¼ˆå³â†’å·¦èª­ã¿ï¼‰ -->
    <div class="page"><img src="images/page3.jpeg"></div>
    <div class="page"><img src="images/page2.jpeg"></div>
    <div class="page"><img src="images/page1.jpeg"></div>
    <div class="page"><img src="images/intro.png"></div>
  </div>
</div>

<script>
const track = document.getElementById("track");
const pages = document.querySelectorAll(".page");

// â˜… æœ€åˆã¯ä¸€ç•ªå³ï¼ˆintroï¼‰
let current = pages.length - 1;

let startX = 0;
let currentX = 0;
let dragging = false;

// è»½ã„ã‚¹ãƒ¯ã‚¤ãƒ—
const threshold = 30;

function updatePosition(animate = true) {
  track.style.transition = animate ? "transform 0.25s ease-out" : "none";
  track.style.transform =
    `translateX(${-current * window.innerWidth}px)`;
}

// åˆæœŸä½ç½®ã‚’åæ˜ 
updatePosition(false);

track.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
  currentX = startX;
  dragging = true;
  updatePosition(false);
});

track.addEventListener("touchmove", e => {
  if (!dragging) return;
  currentX = e.touches[0].clientX;
  const diff = currentX - startX;
  track.style.transform =
    `translateX(${-current * window.innerWidth + diff}px)`;
});

track.addEventListener("touchend", () => {
  dragging = false;
  const diff = currentX - startX;

  // ğŸ‘‰ å³ â†’ å·¦ï¼šæ¬¡ãƒšãƒ¼ã‚¸ï¼ˆå·¦ã¸ï¼‰
  if (diff < -threshold && current > 0) {
    current--;
  }
  // ğŸ‘‰ å·¦ â†’ å³ï¼šå‰ãƒšãƒ¼ã‚¸ï¼ˆå³ã¸ï¼‰
  else if (diff > threshold && current < pages.length - 1) {
    current++;
  }

  updatePosition(true);
});

// ã‚¿ãƒƒãƒ—æ“ä½œ
track.addEventListener("click", e => {
  const x = e.clientX;

  // å·¦ã‚¿ãƒƒãƒ—ï¼šæ¬¡ãƒšãƒ¼ã‚¸
  if (x < window.innerWidth / 2 && current > 0) {
    current--;
  }
  // å³ã‚¿ãƒƒãƒ—ï¼šå‰ãƒšãƒ¼ã‚¸
  else if (x >= window.innerWidth / 2 && current < pages.length - 1) {
    current++;
  }

  updatePosition(true);
});
</script>

</body>
</html>
